"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{57308:function(K,y,e){var S=e(1413),i=e(67294),O=e(61569),p=e(91146),T=function(U,C){return i.createElement(p.Z,(0,S.Z)((0,S.Z)({},U),{},{ref:C,icon:O.Z}))};T.displayName="LockOutlined",y.Z=i.forwardRef(T)},63387:function(K,y,e){e.r(y),e.d(y,{default:function(){return oe}});var S=e(15009),i=e.n(S),O=e(97857),p=e.n(O),T=e(99289),P=e.n(T),U=e(5574),C=e.n(U),$=e(47351),A=e(75212),R=e(29177),b=e(57308),j=e(5966),f=e(1413),N=e(91),B=e(22270),k=e(32808),L=e(67294),H=e(74115),D=e(31649),r=e(85893),V=["options","fieldProps","proFieldProps","valueEnum"],J=L.forwardRef(function(u,v){var d=u.options,g=u.fieldProps,x=u.proFieldProps,F=u.valueEnum,m=(0,N.Z)(u,V);return(0,r.jsx)(D.Z,(0,f.Z)({ref:v,valueType:"checkbox",valueEnum:(0,B.h)(F,void 0),fieldProps:(0,f.Z)({options:d},g),lightProps:(0,f.Z)({labelFormatter:function(){return(0,r.jsx)(D.Z,(0,f.Z)({ref:v,valueType:"checkbox",mode:"read",valueEnum:(0,B.h)(F,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,f.Z)({options:d},g),proFieldProps:x},m))}},m.lightProps),proFieldProps:x},m))}),Q=L.forwardRef(function(u,v){var d=u.fieldProps,g=u.children;return(0,r.jsx)(k.Z,(0,f.Z)((0,f.Z)({ref:v},d),{},{children:g}))}),X=(0,H.G)(Q,{valuePropName:"checked"}),z=X;z.Group=J;var Y=z,w=e(28906),E=e(35312),q=e(99138),Z=e(45360),_=e(98293),ee=e(88677),re=e(73935),se=e(67610),ae=e(75594),ne=function(v){var d=v.content;return(0,r.jsx)(q.Z,{style:{marginBottom:24},message:d,type:"error",showIcon:!0})},te=function(){var v=(0,L.useState)({}),d=C()(v,2),g=d[0],x=d[1],F=(0,L.useState)("loginTab"),m=C()(F,2),h=m[0],W=m[1],G=(0,E.useModel)("@@initialState"),I=G.initialState,le=G.setInitialState,ie=(0,w.l)(function(){return{height:"calc(100vh - 100px)",margin:0}}),ue=function(){var c=P()(i()().mark(function n(){var o,t;return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,I==null||(o=I.fetchUserInfo)===null||o===void 0?void 0:o.call(I);case 2:t=s.sent,t&&(0,re.flushSync)(function(){le(function(M){return p()(p()({},M),{},{currentUser:t})})});case 4:case"end":return s.stop()}},n)}));return function(){return c.apply(this,arguments)}}(),de=function(){var c=P()(i()().mark(function n(o){var t,l,s,M;return i()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,(0,A.E9)(p()({},o));case 3:if(t=a.sent,!t.data){a.next=12;break}return l="\u767B\u5F55\u6210\u529F",Z.ZP.success(l),a.next=9,ue();case 9:return s=new URL(window.location.href).searchParams,E.history.push(s.get("redirect")||"/"),a.abrupt("return");case 12:console.log(t.message),x({status:"error",type:"account"}),a.next=21;break;case 16:a.prev=16,a.t0=a.catch(0),M="\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5",console.log(a.t0),Z.ZP.error(M);case 21:case"end":return a.stop()}},n,null,[[0,16]])}));return function(o){return c.apply(this,arguments)}}(),ce=function(){var c=P()(i()().mark(function n(o){var t;return i()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,(0,A.T4)(o);case 3:if(t=s.sent,!(t.code===200&&t.data)){s.next=8;break}return Z.ZP.success("\u6CE8\u518C\u6210\u529F"),E.history.push("/"),s.abrupt("return");case 8:Z.ZP.error("\u6CE8\u518C\u5931\u8D25\uFF1A"+t.message),x({status:"error",type:"account"}),s.next=16;break;case 12:s.prev=12,s.t0=s.catch(0),console.log(s.t0),Z.ZP.error("\u6CE8\u518C\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5");case 16:case"end":return s.stop()}},n,null,[[0,12]])}));return function(o){return c.apply(this,arguments)}}(),ve=g.status,fe=g.type;return(0,r.jsxs)("div",{className:ie,children:[(0,r.jsx)(E.Helmet,{children:(0,r.jsxs)("title",{children:["\u767B\u5F55"," - ",se.Z.title]})}),(0,r.jsxs)(ae.LoginFormPage,{backgroundImageUrl:"https://bingw.jasonzeng.dev/",logo:(0,r.jsx)(_.C,{size:40,src:"/logo.jpeg"}),title:"One API",subTitle:"\u7B80\u6613\u7684 API \u5171\u4EAB\u5E73\u53F0",submitter:{searchConfig:{submitText:(0,r.jsx)(r.Fragment,{children:h==="loginTab"?"\u767B \u5F55":"\u6CE8 \u518C"})}},initialValues:{autoLogin:!0},onFinish:function(){var c=P()(i()().mark(function n(o){return i()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(h!=="loginTab"){l.next=5;break}return l.next=3,de(o);case 3:l.next=7;break;case 5:return l.next=7,ce(o);case 7:case"end":return l.stop()}},n)}));return function(n){return c.apply(this,arguments)}}(),children:[(0,r.jsx)(ee.Z,{activeKey:h,onChange:function(n){W(n)},centered:!0,items:[{key:"loginTab",label:"\u8D26\u6237\u5BC6\u7801\u767B\u5F55"},{key:"registerTab",label:"\u6CE8\u518C\u65B0\u7528\u6237"}]}),h==="loginTab"&&(0,r.jsxs)(r.Fragment,{children:[ve==="error"&&fe==="account"&&(0,r.jsx)(ne,{content:"\u7528\u6237\u540D\u6216\u5BC6\u7801\u9519\u8BEF (admin/12345678)"}),(0,r.jsx)(j.Z,{name:"userAccount",fieldProps:{size:"large",prefix:(0,r.jsx)(R.Z,{})},placeholder:"\u7528\u6237\u540D: admin or user",rules:[{required:!0,message:"\u7528\u6237\u540D\u662F\u5FC5\u586B\u9879"}]}),(0,r.jsx)(j.Z.Password,{name:"userPassword",fieldProps:{size:"large",prefix:(0,r.jsx)(b.Z,{})},placeholder:"\u5BC6\u7801: 12345678",rules:[{required:!0,message:"\u5BC6\u7801\u662F\u5FC5\u586B\u9879"}]}),(0,r.jsxs)("div",{style:{marginBottom:24},children:[(0,r.jsx)(Y,{noStyle:!0,name:"autoLogin",children:"\u81EA\u52A8\u767B\u5F55"}),(0,r.jsx)("a",{style:{float:"right"},onClick:function(){W("registerTab")},children:"\u65B0\u7528\u6237\u6CE8\u518C"})]})]}),h==="registerTab"&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(j.Z,{name:"userAccount",fieldProps:{size:"large",prefix:(0,r.jsx)(R.Z,{})},placeholder:"\u7528\u6237\u540D",rules:[{required:!0,message:"\u7528\u6237\u540D\u662F\u5FC5\u586B\u9879"},{min:4,message:"\u7528\u6237\u540D\u957F\u5EA6\u81F3\u5C11\u4E3A4\u4F4D"}]}),(0,r.jsx)(j.Z.Password,{name:"userPassword",fieldProps:{size:"large",prefix:(0,r.jsx)(b.Z,{})},placeholder:"\u7528\u6237\u5BC6\u7801",rules:[{required:!0,message:"\u5BC6\u7801\u662F\u5FC5\u586B\u9879"},{min:8,message:"\u5BC6\u7801\u81F3\u5C11\u4E3A8\u4F4D"}]}),(0,r.jsx)(j.Z.Password,{name:"checkPassword",fieldProps:{size:"large",prefix:(0,r.jsx)(b.Z,{})},placeholder:"\u518D\u6B21\u8F93\u5165\u5BC6\u7801",rules:[{required:!0,message:"\u786E\u8BA4\u5BC6\u7801\u662F\u5FC5\u586B\u9879"},{min:8,message:"\u5BC6\u7801\u81F3\u5C11\u4E3A8\u4F4D"}]})]})]}),(0,r.jsx)($.Z,{})]})},oe=te}}]);
